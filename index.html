<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>æœƒè€ƒæˆ°å£«ï¼šç¥å¥‡è£œçµ¦ç¸½éƒ¨ v2.2 å®Œæ•´ç‰ˆ</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f4f4f9; padding: 20px; }
        .container { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .stats { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; background: #eee; padding: 15px; border-radius: 10px; margin-bottom: 20px; font-weight: bold; text-align: center; }
        .menu { display: flex; gap: 5px; margin-bottom: 20px; flex-wrap: wrap; justify-content: center; }
        button { padding: 10px 12px; cursor: pointer; border: none; border-radius: 8px; background: #6c5ce7; color: white; transition: 0.3s; font-size: 0.9em; }
        .section { display: none; }
        .active { display: block; }
        
        /* å…¬å‘Šæ¬„ */
        .author-note { background: #e8f4fd; border-left: 5px solid #3498db; padding: 15px; margin-bottom: 20px; border-radius: 5px; position: relative; }
        .admin-btn { font-size: 0.7em; color: #999; border: none; background: none; cursor: pointer; position: absolute; top: 5px; right: 5px; }
        
        /* æ›´æ–°æ—¥èªŒå½ˆçª— */
        #updateModal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 25px; border-radius: 15px; z-index: 1000; box-shadow: 0 0 30px rgba(0,0,0,0.3); width: 85%; max-height: 70vh; overflow-y: auto; }
        .version-block { border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 10px; }
        .version-tag { background: #6c5ce7; color: white; padding: 2px 8px; border-radius: 5px; font-size: 0.8em; }
        #overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); z-index: 999; }
    </style>
</head>
<body>

<div class="container">
    <h1>ç¥å¥‡è£œçµ¦ç¸½éƒ¨</h1>

    <div class="author-note">
        <strong>ğŸ“¢ ä½œè€…æƒ³å°ä½ èªªï¼š</strong>
        <p id="display-note">æ­¡è¿ä¾†åˆ°è£œçµ¦ç«™ï¼åŠªåŠ›è³ºé‡‘å¹£å§ï¼</p>
        <button class="admin-btn" onclick="toggleAdmin()">âš™ï¸ ç®¡ç†å“¡</button>
        <div id="admin-panel" style="display:none; margin-top:10px;">
            <input type="text" id="admin-user" placeholder="å¸³è™Ÿ" style="width:70px">
            <input type="password" id="admin-pass" placeholder="å¯†ç¢¼" style="width:70px">
            <textarea id="edit-note" placeholder="æ–°çš„å…¬å‘Šå…§å®¹..." style="width:100%; margin-top:5px;"></textarea>
            <button onclick="updateNote()" style="background:#2ecc71; width:100%;">å„²å­˜å…¬å‘Š</button>
        </div>
    </div>

    <div class="stats">
        <div>ğŸ’° é‡‘å¹£<br><span id="money">--</span></div>
        <div>âœ¨ é¡å€¼<br><span id="beauty">--</span>/100</div>
        <div>ğŸ” é£½é£Ÿ<br><span id="hunger">--</span>/100</div>
    </div>

    <div class="menu">
        <button onclick="showSection('work')">è³ºéŒ¢</button>
        <button onclick="showSection('shop')">å•†åº—</button>
        <button onclick="showSection('inventory')">ğŸ’ èƒŒåŒ…</button>
        <button onclick="checkIn()">ğŸ“… ç°½åˆ°</button>
        <button onclick="toggleUpdateModal()" style="background:#ffa502">ğŸ“œ æ›´æ–°æ­·å²</button>
        <button onclick="clearSave()" style="background:#e74c3c">é‡ç½®</button>
    </div>

    </div>

<div id="overlay" onclick="toggleUpdateModal()"></div>
<div id="updateModal">
    <h2 style="margin-top:0;">ğŸ“œ ç‰ˆæœ¬æ›´æ–°æ­·å²ç´€éŒ„</h2>
    <hr>
    
    <div class="version-block">
        <span class="version-tag">v2.2</span> <strong>(æœ€æ–°)</strong>
        <ul>
            <li>[æ–°å¢] æ­·å²ç´€éŒ„é¢æ¿ï¼šä¿ç•™æ‰€æœ‰ç‰ˆæœ¬çš„æ›´æ–°å…§å®¹ã€‚</li>
            <li>[å„ªåŒ–] ç®¡ç†å“¡ç³»çµ±èˆ‡ä½œè€…ç•™è¨€é‚è¼¯ã€‚</li>
        </ul>
    </div>

    <div class="version-block">
        <span class="version-tag">v2.1</span>
        <ul>
            <li>[æ–°å¢] ç®¡ç†å“¡å¸³å¯†ç³»çµ±ï¼šåªæœ‰ Tina å¯ä»¥ä¿®æ”¹ä½œè€…ç•™è¨€ã€‚</li>
            <li>[å„ªåŒ–] è³‡æ–™å­˜æª”ç©©å®šåº¦å¼·åŒ–ã€‚</li>
        </ul>
    </div>

    <div class="version-block">
        <span class="version-tag">v2.0</span>
        <ul>
            <li>[æ‰¾å›] é–‹å­¸å¤§ç¦®åŒ…ã€æ¯æ—¥ç°½åˆ°åŠŸèƒ½ã€‚</li>
            <li>[æ–°å¢] èƒŒåŒ…ç³»çµ±ï¼šè²·å®Œæ±è¥¿è¦é€²èƒŒåŒ…é»é¸ä½¿ç”¨ã€‚</li>
        </ul>
    </div>

    <div class="version-block">
        <span class="version-tag">v1.8</span>
        <ul>
            <li>[æ–°å¢] ç”Ÿå­˜ç³»çµ±ï¼šé£½é£Ÿåº¦æœƒéš¨æ™‚é–“è‡ªå‹•æ¸›å°‘ã€‚</li>
            <li>[æ–°å¢] é£¢é¤“æ‡²ç½°ï¼šé£½é£Ÿåº¦ç‚º 0 æ™‚æœƒæ‰£é™¤é¡å€¼ã€‚</li>
        </ul>
    </div>

    <button onclick="toggleUpdateModal()" style="width:100%; padding:10px; background:#6c5ce7; color:white; border:none; border-radius:8px;">é—œé–‰æ—¥èªŒ</button>
</div>

<script>
    const ADMIN_USER = "tina0310";
    const ADMIN_PASS = "0287901003";

    let state = { money: 500, beauty: 80, hunger: 70, autoIncome: 0, inventory: [], lastCheckIn: "", authorNote: "æ­¡è¿ä¾†åˆ°è£œçµ¦ç«™ï¼" };

    function saveGame() { localStorage.setItem('magicShopSave_v2.2', JSON.stringify(state)); }
    function loadGame() {
        const saved = localStorage.getItem('magicShopSave_v2.2');
        if (saved) state = Object.assign(state, JSON.parse(saved));
        document.getElementById('display-note').innerText = state.authorNote;
    }

    // --- ç®¡ç†å“¡å…¬å‘Š ---
    function toggleAdmin() {
        const p = document.getElementById('admin-panel');
        p.style.display = (p.style.display === 'block' ? 'none' : 'block');
    }
    function updateNote() {
        const u = document.getElementById('admin-user').value;
        const p = document.getElementById('admin-pass').value;
        const n = document.getElementById('edit-note').value;
        if (u === ADMIN_USER && p === ADMIN_PASS) {
            state.authorNote = n;
            document.getElementById('display-note').innerText = n;
            saveGame(); alert("æ›´æ–°æˆåŠŸï¼"); toggleAdmin();
        } else alert("èº«åˆ†é©—è­‰å¤±æ•—ï¼");
    }

    // --- æ—¥èªŒå½ˆçª— ---
    function toggleUpdateModal() {
        const m = document.getElementById('updateModal');
        const o = document.getElementById('overlay');
        const isShow = m.style.display === 'block';
        m.style.display = isShow ? 'none' : 'block';
        o.style.display = isShow ? 'none' : 'block';
    }

    // (ç°½åˆ°ã€æ‰“å·¥ã€UI æ›´æ–°é‚è¼¯èˆ‡å‰ç‰ˆä¸€è‡´)
    setInterval(() => {
        state.money += state.autoIncome;
        if (state.hunger > 0) state.hunger -= 0.5;
        saveGame(); updateUI();
    }, 1000);

    function updateUI() {
        document.getElementById('money').innerText = Math.floor(state.money);
        document.getElementById('beauty').innerText = Math.floor(state.beauty);
        document.getElementById('hunger').innerText = Math.floor(state.hunger);
    }

    function checkIn() {
        const today = new Date().toLocaleDateString();
        if (state.lastCheckIn === today) alert("ä»Šå¤©ç°½åˆ°éäº†ï¼");
        else { state.money += 100; state.lastCheckIn = today; saveGame(); updateUI(); }
    }

    function clearSave() { if(confirm("ç¢ºå®šé‡ç½®é€²åº¦ï¼Ÿ")) { localStorage.removeItem('magicShopSave_v2.2'); location.reload(); } }
    
    loadGame(); updateUI();
</script>
</body>
</html>
