<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„é–‹å­¸å…¨èƒ½åŠ©æ‰‹</title>
    <style>
        :root { --poya-pink: #ff4757; --poya-blue: #3498db; --nav-bg: #2d3436; }
        body { font-family: sans-serif; background: #f8f9fa; margin: 0; padding-bottom: 30px; }
        
        /* é ‚éƒ¨å°è¦½åˆ— */
        .nav-bar { background: var(--nav-bg); padding: 10px; display: flex; justify-content: center; gap: 15px; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .nav-btn { background: #636e72; color: white; border: none; padding: 10px 25px; border-radius: 20px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .nav-btn.active { background: var(--poya-pink); }

        /* åˆ‡æ›å€å¡Šæ§åˆ¶ */
        .app-section { display: none; padding: 15px; }
        .app-section.active { display: block; }

        /* --- è¯çµ¡ç°¿æ¨£å¼ --- */
        .contact-card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .contact-textarea { width: 100%; border: 1px solid #ddd; border-radius: 10px; padding: 15px; font-size: 1rem; box-sizing: border-box; resize: none; margin-top: 10px; }
        .save-hint { color: #2ecc71; font-size: 0.8rem; margin-top: 5px; text-align: right; }

        /* --- å•†åŸæ¨£å¼ --- */
        .stats-row { display: flex; justify-content: space-around; margin: 15px 0; }
        .stat-item { font-size: 0.8rem; font-weight: bold; background: #f1f2f6; padding: 5px 10px; border-radius: 15px; border: 1px solid #ddd; }
        .money-display { font-size: 1.6rem; color: #2ecc71; font-weight: bold; text-align: center; margin: 10px 0; }
        
        .tab-bar { display: flex; overflow-x: auto; background: white; padding: 8px 0; margin: 10px -15px; padding-left: 15px; border-bottom: 1px solid #eee; }
        .shop-tab { padding: 8px 15px; margin-right: 8px; border-radius: 20px; background: #eee; font-size: 0.8rem; border: none; flex-shrink: 0; }
        .shop-tab.active { background: var(--poya-blue); color: white; }

        .shop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .item-card { background: white; padding: 12px; border-radius: 12px; border: 1px solid #eee; display: flex; flex-direction: column; justify-content: space-between; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .item-name { font-weight: bold; font-size: 0.85rem; height: 2.5em; overflow: hidden; }
        .item-price { color: var(--poya-pink); font-weight: bold; margin: 5px 0; }
        
        .buy-btn { background: var(--poya-blue); color: white; border: none; padding: 8px; border-radius: 6px; font-size: 0.8rem; cursor: pointer; }
        .buy-btn:disabled { background: #ccc; }

        .inventory-section { background: white; padding: 15px; border-radius: 12px; margin-top: 15px; border: 2px dashed var(--poya-blue); }
        .bag-item { display: inline-flex; align-items: center; background: #e8f4fd; padding: 5px 10px; margin: 3px; border-radius: 5px; font-size: 0.8rem; }
        .use-btn { background: #2ecc71; color: white; border: none; padding: 2px 6px; border-radius: 4px; margin-left: 5px; cursor: pointer; }

        .work-btn { background: #f1c40f; color: #333; padding: 15px; width: 100%; border: none; border-radius: 12px; font-weight: bold; margin: 15px 0; font-size: 1.1rem; box-shadow: 0 4px 0 #d4ac0d; cursor: pointer; }
        .work-btn:active { transform: translateY(2px); box-shadow: 0 0 0; }
    </style>
</head>
<body>

<div class="nav-bar">
    <button id="navContact" class="nav-btn active" onclick="switchMainApp('contact')">ğŸ“ è¯çµ¡ç°¿</button>
    <button id="navShop" class="nav-btn" onclick="switchMainApp('shop')">ğŸª æ•¸ä½å¯¶é›…</button>
</div>

<div id="contactSection" class="app-section active">
    <div class="contact-card">
        <h3 style="margin-top:0;">ğŸ“… ä»Šæ—¥å‚™å¿˜éŒ„</h3>
        <p style="font-size:0.8rem; color:#666;">å…§å®¹æœƒè‡ªå‹•å„²å­˜åœ¨é€™å°æ‰‹æ©Ÿä¸­</p>
        <textarea id="memoInput" class="contact-textarea" rows="12" placeholder="åœ¨æ­¤è¼¸å…¥ä½œæ¥­ã€è€ƒè©¦æˆ–å¾…è¾¦äº‹é …..."></textarea>
        <div class="save-hint">âœ“ å·²è‡ªå‹•å„²å­˜</div>
    </div>
</div>

<div id="shopSection" class="app-section">
    <div class="money-display">ğŸ’° $<span id="balance">0</span></div>
    <div class="stats-row">
        <div class="stat-item">âœ¨ é¡å€¼: <span id="beautyStat">0</span></div>
        <div class="stat-item">ğŸ” é£½é£Ÿ: <span id="fullStat">100</span></div>
        <div class="stat-item">ğŸ“ˆ ç§’ç”¢: $<span id="incomeVal">0</span></div>
    </div>

    <button class="work-btn" onclick="work()">ğŸ–ï¸ åŠªåŠ›æ‰“å·¥è³ºéŒ¢ (+$10)</button>

    <div class="tab-bar">
        <button class="shop-tab active" onclick="switchShopTab('ä¿é¤Š')">ğŸ§¼ è‡‰éƒ¨ä¿é¤Š</button>
        <button class="shop-tab" onclick="switchShopTab('ç¾å¦')">ğŸ’„ å½©å¦å€</button>
        <button class="shop-tab" onclick="switchShopTab('é£Ÿå“')">ğŸ¥¤ é›¶é£Ÿé£²å“</button>
        <button class="shop-tab" onclick="switchShopTab('æŠ•è³‡')">ğŸ›ï¸ ç”¢é‡‘æŠ•è³‡</button>
    </div>

    <div class="shop-grid" id="shopGrid"></div>

    <div class="inventory-section">
        <b>ğŸ’ æˆ‘çš„èƒŒåŒ…ï¼š</b>
        <div id="bagDisplay" style="margin-top:10px; font-size:0.9rem;">ç©ºç©ºçš„</div>
    </div>
</div>

<script>
    // --- è³‡æ–™åˆå§‹åŒ– ---
    let memo = localStorage.getItem('my_memo') || "";
    let money = parseInt(localStorage.getItem('game_money')) || 0;
    let autoIncome = parseInt(localStorage.getItem('game_income')) || 0;
    let beauty = parseInt(localStorage.getItem('game_beauty')) || 0;
    let fullness = parseInt(localStorage.getItem('game_fullness')) || 100;
    let bag = JSON.parse(localStorage.getItem('game_bag')) || [];
    let currentShopTab = 'ä¿é¤Š';

    const products = {
        'ä¿é¤Š': [
            { name: "é›ªèŠ™è˜­å«©ç™½åŒ–å¦æ°´", price: 199, effect: { type: 'beauty', val: 5 } },
            { name: "æ›¼ç§€é›·æ•¦èª¿ç†æ°´", price: 220, effect: { type: 'beauty', val: 6 } },
            { name: "æŠ—ç—˜æ§æ²¹æ´—é¡æ…•æ–¯", price: 180, effect: { type: 'beauty', val: 5 } },
            { name: "Nature Face å™´éœ§", price: 150, effect: { type: 'beauty', val: 4 } },
            { name: "BiorÃ© å°è’¼è˜­é˜²æ›¬", price: 280, effect: { type: 'beauty', val: 7 } }
        ],
        'ç¾å¦': [
            { name: "æƒ¹æˆ‘æ¸…çˆ½èœœç²‰", price: 160, effect: { type: 'beauty', val: 12 } },
            { name: "éŸ“ç³»çµ²çµ¨å£ç´…", price: 450, effect: { type: 'beauty', val: 25 } },
            { name: "ä¹å®®æ ¼å¤§åœ°è‰²çœ¼å½±", price: 580, effect: { type: 'beauty', val: 35 } }
        ],
        'é£Ÿå“': [
            { name: "çç å¥¶èŒ¶", price: 65, effect: { type: 'full', val: 25 } },
            { name: "å’”è¾£å§†ä¹…å¤§åŒ…", price: 45, effect: { type: 'full', val: 15 } },
            { name: "è¾›æ‹‰éºµ", price: 160, effect: { type: 'full', val: 60 } }
        ],
        'æŠ•è³‡': [
            { name: "è‡ªå‹•å°åŠ©æ‰‹", price: 1000, income: 10 },
            { name: "æ•¸ä½å¯¶é›…åˆ†åº—", price: 10000, income: 85 },
            { name: "å®‡å®™ç‰©æµä¸­å¿ƒ", price: 50000, income: 500 }
        ]
    };

    // --- æ ¸å¿ƒé‚è¼¯ ---
    function switchMainApp(app) {
        document.getElementById('contactSection').classList.toggle('active', app === 'contact');
        document.getElementById('shopSection').classList.toggle('active', app === 'shop');
        document.getElementById('navContact').classList.toggle('active', app === 'contact');
        document.getElementById('navShop').classList.toggle('active', app === 'shop');
    }

    // è¯çµ¡ç°¿å­˜æª”
    document.getElementById('memoInput').value = memo;
    document.getElementById('memoInput').addEventListener('input', (e) => {
        localStorage.setItem('my_memo', e.target.value);
    });

    // å•†åŸç”¢é‡‘
    setInterval(() => {
        money += autoIncome;
        if (fullness > 0) fullness = Math.max(0, fullness - 0.1);
        updateShopUI();
    }, 1000);

    function updateShopUI() {
        document.getElementById('balance').innerText = money.toLocaleString();
        document.getElementById('incomeVal').innerText = autoIncome;
        document.getElementById('beautyStat').innerText = Math.floor(beauty);
        document.getElementById('fullStat').innerText = Math.floor(fullness);
        
        const grid = document.getElementById('shopGrid');
        grid.innerHTML = '';
        products[currentShopTab].forEach((p, idx) => {
            const canAfford = money >= p.price;
            grid.innerHTML += `
                <div class="item-card">
                    <div class="item-name">${p.name}</div>
                    <div style="font-size:0.7rem; color:#888">${p.income ? '+$'+p.income+'/s' : 'æ•ˆæœ:+'+p.effect.val}</div>
                    <div class="item-price">$${p.price}</div>
                    <button class="buy-btn" ${canAfford ? '' : 'disabled'} onclick="buyItem('${currentShopTab}', ${idx})">è³¼è²·</button>
                </div>
            `;
        });

        const bagDiv = document.getElementById('bagDisplay');
        bagDiv.innerHTML = bag.length ? '' : 'ç©ºç©ºçš„';
        bag.forEach((item, idx) => {
            bagDiv.innerHTML += `
                <span class="bag-item">${item.name} <button class="use-btn" onclick="useItem(${idx})">ç”¨</button></span>
            `;
        });
        saveGame();
    }

    function buyItem(tab, idx) {
        const p = products[tab][idx];
        if (money >= p.price) {
            money -= p.price;
            if (p.income) autoIncome += p.income;
            else bag.push(p);
            updateShopUI();
        }
    }

    function useItem(idx) {
        const item = bag[idx];
        if (item.effect.type === 'beauty') beauty += item.effect.val;
        if (item.effect.type === 'full') fullness += item.effect.val;
        bag.splice(idx, 1);
        updateShopUI();
    }

    function switchShopTab(t) {
        currentShopTab = t;
        document.querySelectorAll('.shop-tab').forEach(btn => btn.classList.toggle('active', btn.innerText.includes(t)));
        updateShopUI();
    }

    function work() { money += 10; updateShopUI(); }
    function saveGame() {
        localStorage.setItem('game_money', money);
        localStorage.setItem('game_income', autoIncome);
        localStorage.setItem('game_beauty', beauty);
        localStorage.setItem('game_fullness', fullness);
        localStorage.setItem('game_bag', JSON.stringify(bag));
    }

    updateShopUI();
</script>
</body>
</html>
