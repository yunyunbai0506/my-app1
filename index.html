<script>
    // ğŸ”‘ é€™æ˜¯å¦³çš„æ°¸æ†é‘°åŒ™ï¼Œçµ•å°ä¸éš¨ä¾¿æ›´æ”¹ï¼
    const SAVE_KEY = "Tina_MagicShop_Global_Save"; 
    const ADMIN_USER = "tina0310", ADMIN_PASS = "0287901003";

    // é è¨­çš„åˆå§‹ç‹€æ…‹
    let state = { 
        money: 500, beauty: 80, hunger: 70, inventory: [], 
        lastCheckIn: "", authorNote: "æ­¡è¿å›ä¾†ï¼Œåº—é•·ï¼", 
        diaryContent: "", hasReceivedGift: false,
        lastWashTime: Date.now(), isDirty: false, hasAcne: false
    };

    function saveGame() { localStorage.setItem(SAVE_KEY, JSON.stringify(state)); }

    function loadGame() {
        const saved = localStorage.getItem(SAVE_KEY);
        if (saved) {
            try {
                const parsed = JSON.parse(saved);
                // æ ¸å¿ƒä¿è­·ï¼šåˆ©ç”¨ Object.assignï¼Œåªè¦†è“‹å­˜æª”ä¸­æœ‰çš„è³‡æ–™ï¼Œ
                // å¦‚æœæœªä¾†æ›´æ–°å¢åŠ äº†æ–°æ¬„ä½ï¼Œæœƒä¿ç•™åˆå§‹ç‹€æ…‹çš„é è¨­å€¼ï¼Œä¸æœƒå‡ºéŒ¯ï¼
                state = Object.assign(state, parsed);
                console.log("è³‡æ–™åŠ è¼‰æˆåŠŸï¼Œæ­¡è¿å›ä¾†ï¼");
            } catch (e) {
                console.error("å­˜æª”ææ¯€ï¼Œå·²æ¢å¾©é è¨­ã€‚");
            }
        }
        // æ›´æ–°ä»‹é¢
        document.getElementById('display-note').innerText = state.authorNote;
        document.getElementById('diary-box').value = state.diaryContent || "";
        checkGift();
    }

    // ... (å…¶é¤˜åŠŸèƒ½é‚è¼¯ä¿æŒä¸è®Š) ...
</script>
